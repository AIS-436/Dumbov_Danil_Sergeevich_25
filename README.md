# Построение CI/CD пайплайна для автоматического тестирования и развертывания информационной системы

# ОГЛАВЛЕНИЕ

- [ВВЕДЕНИЕ](#введение)
- [1. Понятие CI/CD: определение и ключевые концепции](#1-понятие-cicd-определение-и-ключевые-концепции)
  - [1.1. Непрерывная интеграция (CI)](#11-непрерывная-интеграция-ci)
  - [1.2. Непрерывная доставка и развёртывание (CD)](#12-непрерывная-доставка-и-развёртывание-cd)
- [2. Компоненты CI/CD пайплайна](#2-компоненты-cicd-пайплайна)
  - [2.1. Системы контроля версий](#21-системы-контроля-версий)
  - [2.2. Серверы непрерывной интеграции](#22-серверы-непрерывной-интеграции)
  - [2.3. Инструменты автоматического тестирования](#23-инструменты-автоматического-тестирования)
  - [2.4. Средства контейнеризации и оркестрации](#24-средства-контейнеризации-и-оркестрации)
- [3. Построение CI/CD пайплайна на практике](#3-построение-cicd-пайплайна-на-практике)
  - [3.1. Пайплайн для веб-приложения](#31-пайплайн-для-веб-приложения)
  - [3.2. Пайплайн для микросервисной архитектуры](#32-пайплайн-для-микросервисной-архитектуры)
- [4. Стратегии развёртывания и обеспечение безопасности](#4-стратегии-развёртывания-и-обеспечение-безопасности)
  - [4.1. Стратегии развёртывания](#41-стратегии-развёртывания)
  - [4.2. Безопасность в CI/CD пайплайне](#42-безопасность-в-cicd-пайплайне)
  - [4.3. Мониторинг и наблюдаемость](#43-мониторинг-и-наблюдаемость)
- [ЗАКЛЮЧЕНИЕ](#заключение)
- [СПИСОК ЛИТЕРАТУРЫ](#список-литературы)

---

## ВВЕДЕНИЕ

В современном мире разработки программного обеспечения скорость и качество выпуска новых версий продуктов являются критическими факторами конкурентоспособности. Традиционные подходы к разработке всё чаще уступают место методологиям непрерывной интеграции и непрерывной доставки (CI/CD).

Согласно отчёту DORA (DevOps Research and Assessment) за 2023 год, организации с развитыми практиками CI/CD демонстрируют в 208 раз более частые развёртывания и в 106 раз более быстрое восстановление после сбоев.

Схематически CI/CD-пайплайн выглядит так:
```
Разработчик → Git Push → CI-сервер → Build → Test → Deploy Staging → Deploy Production
```

Цель данного реферата — рассмотреть принципы построения CI/CD-пайплайнов, изучить основные инструменты и технологии, а также проанализировать стратегии развёртывания и вопросы обеспечения безопасности.

---

## 1. Понятие CI/CD: определение и ключевые концепции

### 1.1. Непрерывная интеграция (CI)

CI (Continuous Integration) — практика разработки, при которой разработчики регулярно объединяют изменения кода в общий репозиторий. Мартин Фаулер определяет её как «практику, при которой члены команды часто интегрируют свою работу».

Основные принципы CI:

- Единый репозиторий исходного кода
- Автоматизированная сборка
- Самотестирующаяся сборка
- Ежедневные коммиты
- Быстрая сборка (не более 10 минут)

### 1.2. Непрерывная доставка и развёртывание (CD)

**Continuous Delivery** — код всегда готов к развёртыванию, но решение принимается вручную.

**Continuous Deployment** — каждое успешно прошедшее тестирование изменение автоматически разворачивается в production.

Преимущества CI/CD:

- Сокращение Time-to-Market
- Повышение качества кода
- Снижение рисков при развёртывании
- Улучшение обратной связи

---

## 2. Компоненты CI/CD пайплайна

### 2.1. Системы контроля версий

Git — наиболее распространённая VCS. Популярные стратегии ветвления:

- **Git Flow** — ветки develop, release, hotfix
- **GitHub Flow** — main + feature-ветки с pull request
- **Trunk-Based Development** — одна ветка с короткоживущими feature-ветками

### 2.2. Серверы непрерывной интеграции

- **Jenkins** — open-source сервер с 1800+ плагинами
- **GitLab CI/CD** — конфигурация через `.gitlab-ci.yml`
- **GitHub Actions** — YAML-конфигурация, 15000+ готовых actions

Пример GitHub Actions:
```yaml
name: CI Pipeline
on: [push, pull_request]
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: Build
        run: npm install && npm run build
      - name: Test
        run: npm test
```

### 2.3. Инструменты автоматического тестирования

Пирамида тестирования Майка Кона:

| Уровень | Тип тестов | Доля | Инструменты |
|---------|------------|------|-------------|
| Основание | Unit Tests | 70-80% | JUnit, pytest, Jest |
| Середина | Integration Tests | 15-20% | Testcontainers |
| Вершина | E2E Tests | 5-10% | Selenium, Cypress, Playwright |

### 2.4. Средства контейнеризации и оркестрации

**Docker** — стандарт контейнеризации. Пример Dockerfile:
```dockerfile
FROM node:18-alpine
WORKDIR /app
COPY package*.json ./
RUN npm install
COPY . .
EXPOSE 3000
CMD ["npm", "start"]
```

**Kubernetes** — оркестрация контейнеров. Ключевые абстракции: Pod, Deployment, Service, ConfigMap, Secret.

---

## 3. Построение CI/CD пайплайна на практике

### 3.1. Пайплайн для веб-приложения

| Этап | Описание |
|------|----------|
| Build | Сборка приложения, установка зависимостей |
| Lint | Статический анализ (ESLint, SonarQube) |
| Test | Тесты с покрытием ≥80% |
| Security Scan | SAST, проверка зависимостей |
| Docker Build | Сборка и публикация образа |
| Deploy Staging | Развёртывание в тестовую среду |
| Deploy Production | Развёртывание в production |

### 3.2. Пайплайн для микросервисной архитектуры

- **Monorepo vs Polyrepo** — выбор структуры репозиториев (Nx, Turborepo, Bazel)
- **Контрактное тестирование** — Pact для проверки совместимости API
- **GitOps** — декларативное управление через ArgoCD, Flux

---

## 4. Стратегии развёртывания и обеспечение безопасности

### 4.1. Стратегии развёртывания

- **Rolling Update** — постепенное обновление экземпляров (default в Kubernetes)
- **Blue-Green** — два идентичных окружения, мгновенное переключение
- **Canary** — новая версия на 1-5% трафика с постепенным увеличением
- **Feature Flags** — управление функциональностью без передеплоя (LaunchDarkly, Unleash)

### 4.2. Безопасность в CI/CD пайплайне

Подход «Shift Left Security»:

- **SAST** — статический анализ кода (SonarQube, Checkmarx)
- **DAST** — динамическое тестирование (OWASP ZAP, Burp Suite)
- **SCA** — проверка зависимостей (Snyk, Dependabot)
- **Secret Management** — HashiCorp Vault, AWS Secrets Manager
- **Container Security** — Trivy, Clair, Anchore

### 4.3. Мониторинг и наблюдаемость

Три столпа Observability:

- **Метрики** — Prometheus + Grafana
- **Логи** — ELK Stack или Loki + Grafana
- **Трассировки** — Jaeger, Zipkin, OpenTelemetry

---

## ЗАКЛЮЧЕНИЕ

В ходе написания реферата рассмотрены ключевые аспекты построения CI/CD-пайплайнов:

- Принципы CI/CD и их преимущества
- Компоненты пайплайна: VCS, CI-серверы, тестирование, контейнеризация
- Стратегии развёртывания: Rolling, Blue-Green, Canary, Feature Flags
- Безопасность: SAST, DAST, SCA, управление секретами
- Наблюдаемость: метрики, логи, трассировки

CI/CD — это не просто набор инструментов, а культура разработки, направленная на повышение эффективности и качества создания программного обеспечения.

---

## СПИСОК ЛИТЕРАТУРЫ

- **Fowler, M.** Continuous Integration [Электронный ресурс]. — URL: https://martinfowler.com/articles/continuousIntegration.html (дата обращения: 15.12.2025).

- **GitLab.** What is CI/CD? [Электронный ресурс]. — URL: https://about.gitlab.com/topics/ci-cd/ (дата обращения: 15.12.2025).

- **GitHub.** GitHub Actions Documentation [Электронный ресурс]. — URL: https://docs.github.com/en/actions (дата обращения: 15.12.2025).

- **Jenkins.** Jenkins User Documentation [Электронный ресурс]. — URL: https://www.jenkins.io/doc/ (дата обращения: 15.12.2025).

- **Docker Inc.** Docker Documentation [Электронный ресурс]. — URL: https://docs.docker.com/ (дата обращения: 15.12.2025).

- **Kubernetes.** Kubernetes Documentation [Электронный ресурс]. — URL: https://kubernetes.io/docs/ (дата обращения: 15.12.2025).

- **Humble, J.** Continuous Delivery / J. Humble, D. Farley. — Addison-Wesley, 2010. — 512 p.

- **Kim, G.** The DevOps Handbook / G. Kim, J. Humble, P. Debois, J. Willis. — IT Revolution Press, 2016. — 480 p.

- **DORA.** Accelerate State of DevOps Report [Электронный ресурс]. — URL: https://dora.dev/ (дата обращения: 15.12.2025).

- **ArgoCD.** Argo CD Documentation [Электронный ресурс]. — URL: https://argo-cd.readthedocs.io/ (дата обращения: 15.12.2025).

- **HashiCorp.** Terraform Documentation [Электронный ресурс]. — URL: https://developer.hashicorp.com/terraform/docs (дата обращения: 15.12.2025).

- **Prometheus.** Prometheus Documentation [Электронный ресурс]. — URL: https://prometheus.io/docs/ (дата обращения: 15.12.2025).
